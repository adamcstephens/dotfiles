#!/usr/bin/env sh

if [ "$USER" != "root" ]; then
  if [ "$TERM_PROGRAM" = "vscode" ]; then
    case $TERM_PROGRAM_VERSION in
    *-insider)
      exec code-insiders --wait $@
      ;;
    *)
      exec code --wait $@
      ;;
    esac
  elif command -v emacsclient >/dev/null 2>&1; then
    exec em $@
  fi
fi

# fallback to vim
exec vim $@
