version: "3"

tasks:
  all:
    cmds:
      - task: asdf-direnv
      - task: direnv
      - task: btop
      - task: vim-plug-delete
      - task: dotbot-delete-asdf-plugin
      - task: dotbot-delete-git-plugin
      - task: aqua-remove-direnv

  asdf-direnv:
    cmds:
      - ~/.asdf/bin/asdf plugin remove direnv || true
      - ~/.asdf/bin/asdf plugin add direnv
      - ~/.asdf/bin/asdf global direnv system
    status:
      - test ! -d ~/.asdf || ~/.asdf/bin/asdf list direnv 2>&1 | grep "No versions installed"

  aqua-remove-direnv:
    cmds:
      - rm ~/.local/share/aquaproj-aqua/bin/direnv
    status:
      - test ! -e ~/.local/share/aquaproj-aqua/bin/direnv

  btop:
    cmds:
      - rm -rf ~/.config/btop
    status:
      - test -L ~/.config/btop

  direnv:
    cmds:
      - rm -rf ~/.config/direnv
    status:
      - test -L ~/.config/direnv

  dotbot-delete-asdf-plugin:
    cmds:
      - rm -rf ~/.dotfiles/dotbot-asdf
    status:
      - test ! -e ~/.dotfiles/dotbot-asdf

  dotbot-delete-git-plugin:
    cmds:
      - rm -rf ~/.dotfiles/dotbot-git
    status:
      - test ! -e ~/.dotfiles/dotbot-git

  vim-plug-delete:
    cmds:
      - rm -rf ~/.vim
    status:
      - test -L ~/.vim
