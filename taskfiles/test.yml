version: "3"

tasks:
  run:
    cmds:
      - task: build
      - docker run --rm -it -v $PWD:/root/.dotfiles dotfiles-test sh -c "cd /root/.dotfiles; ./install"

  build:
    cmds:
      - docker build --tag dotfiles-test .
    status:
      - docker images | rg dotfiles-test

  shell:
    cmds:
      - task: build
      - docker run --rm -it localhost/dotfiles-test fish
